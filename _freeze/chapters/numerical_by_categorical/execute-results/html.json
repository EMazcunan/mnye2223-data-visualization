{
  "hash": "892870cf93d81aca5c17bb08f384e76c",
  "result": {
    "markdown": "---\neditor:\n    render-on-save: true\n---\n\n# Una variable numérica por categorías\n\n\nEn la @sec-1numerical estudiamos la distribución del peso de todos los pingüinos del estudio. Ahora estudiaremos si hay diferencias en la distribución del peso dependiendo de la especie.\n\n## El método `describe()` \n\n\nEl método `describe()` que usamos en la @sec-1numerical-describe para obtener un resumen de la distribución del peso de todos los pingüinos, también puede aplicarse al peso agrupado por especies:\n\n::: {.cell execution_count=2}\n``` {.python .cell-code}\npenguins.groupby(\"species\")[\"body_mass_g\"].describe()\n```\n\n::: {.cell-output .cell-output-display execution_count=38}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>count</th>\n      <th>mean</th>\n      <th>std</th>\n      <th>min</th>\n      <th>25%</th>\n      <th>50%</th>\n      <th>75%</th>\n      <th>max</th>\n    </tr>\n    <tr>\n      <th>species</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Adelie</th>\n      <td>151.0</td>\n      <td>3700.662252</td>\n      <td>458.566126</td>\n      <td>2850.0</td>\n      <td>3350.0</td>\n      <td>3700.0</td>\n      <td>4000.0</td>\n      <td>4775.0</td>\n    </tr>\n    <tr>\n      <th>Chinstrap</th>\n      <td>68.0</td>\n      <td>3733.088235</td>\n      <td>384.335081</td>\n      <td>2700.0</td>\n      <td>3487.5</td>\n      <td>3700.0</td>\n      <td>3950.0</td>\n      <td>4800.0</td>\n    </tr>\n    <tr>\n      <th>Gentoo</th>\n      <td>123.0</td>\n      <td>5076.016260</td>\n      <td>504.116237</td>\n      <td>3950.0</td>\n      <td>4700.0</td>\n      <td>5000.0</td>\n      <td>5500.0</td>\n      <td>6300.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nVemos que obtenemos una tabla con el resultado combinado de aplicar el método `describe()` en el grupo de datos correspondiente a cada una de las tres especies.\n\nInterpretamos los resultados en las columnas de rótulo `count`, `mean`, `50%` y `max`:\n\n\nFragmento de la salida | Significado\n----- | ------\n`count` | De la @sec-1categorical-describe sabíamos que hay $152$ pingüinos de la especie Adelie, $124$ de la especie Gentoo, y $68$ de la especie Chinstrap. Y de la @sec-1numerical-describe sabíamos que se desconoce el peso de dos pingüinos. Ahora sabemos que esos dos pingüinos son uno de la especie Adelie y otro de la especie Gentoo, y que se conoce el peso de todos los pingüinos de la especie Chinstrap.\n`mean` | El peso medio de los pingüinos de la especie Gentoo es de $5$ kilogramos y $76$ gramos, superior a la media global de $4$ kilos y $201$ gramos (que conocíamos de la @sec-1numerical-describe). Y los pesos medios de las especies Adelie y  Chinstrap son inferiores a la media global y muy similares: $3$ kilos $700$ gramos, y $3$ kilos y $733$ gramos respectivamente.\n`50%` | La mediana del peso es la misma para las especies Adelie y Chinstrap, $3$ kilos y $700$ gramos, y sustancialmente más grande, $5$ kilos para la especie Gentoo.\n`max` | El pingüino de mayor peso del estudio, con $6$ kilos y $300$ gramos, es de la especie Gentoo. Mientras que el peso máximo para las especies Adelie y Chinstrap no supera los $5$ kilos ($4$ kilos y $775$ gramos y $4$ kilos y $800$ gramos respectivamente).\n\n::: {#exr-numerical_by_categorical-describe}\nUsa los métodos `groupby()` y `describe()` para responder a las siguientes preguntas:\n\na.  Indica el peso medio de hembras y machos y compáralos con el peso medio global.\na.  ¿Cuál es el peso máximo de las hembras?\na.  ¿Cuál es la mediana del peso de los machos?\na.  El pingüino de mayor peso ¿es macho o hembra?\n:::\n\n\n## Histogramas \n\nEn este apartado aprenderemos a construir diferentes histogramas para comparar la distribución del peso de las tres especies de pingüinos.\n\n### Histograma de barras apiladas\n\nPara crear un histograma del peso distinguiendo la especie mediante barras apiladas ejecuta la siguiente instrucción:\n\n::: {.cell execution_count=3}\n``` {.python .cell-code}\nsns.histplot(\n    data=penguins, \n    x=\"body_mass_g\", \n    hue=\"species\",\n    multiple=\"stack\"\n);\n```\n\n::: {.cell-output .cell-output-display}\n![](numerical_by_categorical_files/figure-html/cell-4-output-1.png){width=585 height=429}\n:::\n:::\n\n\nObserva que la forma del diagrama es la misma que la del histograma que se realizó en la @sec-1numerical-histogram. La novedad es que cada una de las barras que representa el número de pingüinos en cada uno de los intervalos de peso se ha fragmentado en tres barras indicando la contribución de cada especie. Aprecia que conforme va aumentando el peso, va disminuyendo la contribución de las especies Adelie (azul) y Chinstrap (naranja), y aumentando la contribución de la especie Gentoo (verde).\n\nCon el argumento `hue=\"species\"` conseguimos que los datos se dividan según las categorías de la variable `species` y se asigne un color diferente a cada categoría, que se indica en la leyenda de la esquina superior derecha del gráfico.  \n\nY con el argumento `multiple=\"stack\"` indicamos que las barras de cada especie se dibujen apiladas en cada intervalo.\n\n::: {.callout-note}\nPara crear un histograma de barras apiladas de una variable numérica por categorías, usa la función `histplot()` del paquete `seaborn` conforme aprendiste en la sección @sec-1numerical-histogram y además:\n\n- indica el nombre de la variable que determina las categorías como valor del parámetro `hue`.\n- usa `multiple=\"stack\"` para que las barras de las diferentes categorías se muestren apiladas.\n::: \n\n\n::: {#exr-histogram-stack}\nCrea un histograma de barras apiladas para el peso de los pingüinos por sexo.\n:::\n\n### Histograma de barras separadas\n\nPara crear un histograma del peso con barras separadas para cada especie ejecuta la siguiente instrucción:\n\n::: {.cell execution_count=4}\n``` {.python .cell-code}\nsns.histplot(\n    data=penguins,  \n    x=\"body_mass_g\", \n    hue=\"species\",\n    multiple=\"dodge\"\n);\n```\n\n::: {.cell-output .cell-output-display}\n![](numerical_by_categorical_files/figure-html/cell-5-output-1.png){width=585 height=429}\n:::\n:::\n\n\nEn este tipo de histograma fijándonos en las barras de un solo color vemos el histograma de la especie correspondiente. \n\n::: {.callout-note}\nPara crear un histograma de barras separadas procede de la misma forma que para crear un histograma de barras apiladas pero cambia el valor del parámetro `multiple` a `\"dodge\"`.\n::: \n\n::: {#exr-histogram-stack}\nCrea un histograma de barras separadas para la longitud del pico de los pingüinos por sexo.\n:::\n\n<!-- ```{python}\nsns.histplot(data=penguins,  x=\"body_mass_g\", hue=\"species\",\n    # stat=\"count\",\n    multiple=\"layer\"\n);\n``` -->\n\n<!-- ```{python}\nsns.histplot(data=penguins, x=\"body_mass_g\", hue=\"species\",\n    # stat=\"count\",\n    multiple=\"fill\"\n);\n``` -->\n\n\n### Mosaico de histogramas\n\n\nEn la __próxima sesión__ aprenderás a realizar el siguiente mosaico de histogramas (con una sola línea de código):\n\n::: {.cell execution_count=5}\n\n::: {.cell-output .cell-output-display}\n![](numerical_by_categorical_files/figure-html/cell-6-output-1.png){width=853 height=275}\n:::\n:::\n\n\n## Diagramas de caja y bigotes\n\nEn la __próxima sesión__ aprenderás a realizar el siguiente gráfico comparativo de los diagramas de caja y bigotes del peso de cada especie (es el gráfico de la portada).\n\nRepasaremos el concepto de __outliers__ para explicar los dos outliers que aparecen en la distribución del peso de los pingüinos de la especie Chinstrap.\n\n::: {.cell execution_count=6}\n\n::: {.cell-output .cell-output-display}\n![](numerical_by_categorical_files/figure-html/cell-7-output-1.png){width=602 height=429}\n:::\n:::\n\n\n",
    "supporting": [
      "numerical_by_categorical_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}